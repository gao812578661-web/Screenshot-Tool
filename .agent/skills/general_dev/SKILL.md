---
name: general_development
description: 遵循“用户核心开发协议”的轻量化通用开发工作流。包含分析、计划、任务分解与执行验证。
---

# 通用开发技能 (General Development Skill)

本技能旨在贯彻“用户核心开发协议”，确保开发过程高效、透明且结果可控。

## 1. 核心理念 (Core Philosophy)

> **简洁至上 (KISS)**
> 任何设计与代码应保持最简形式，避免过度工程化。先让它工作，再让它完美。

> **深度分析 (First Principles)**
> 遇到问题时，回归基本原理进行拆解，而非盲目尝试或照搬现有方案。善用工具获取第一手信息。

> **事实为本 (Fact-Based)**
> 一切决策基于日志、测试结果或官方文档。对不确定的假设保持怀疑，并优先验证。

## 2. 标准开发流程 (Standard Workflow)

### 第一阶段：构思方案 (Draft Plan)
1.  **明确需求**: 仔细阅读用户请求，确认最终目标。
2.  **现状调研**: 检查现有代码 (`codebase_search`) 和知识库 (KIs)。
3.  **制定计划**: 创建或更新 `implementation_plan.md`。
    *   **目标 (Goal)**: 一句话描述要做什么。
    *   **关键变更 (Changes)**: 列出受影响的文件和逻辑。
    *   **验证方案 (Verification)**: 如何证明功能正常（测试用例、手动步骤）。

### 第二阶段：提请审核 (Request Review)
1.  使用 `notify_user` 将计划呈现给用户。
2.  **等待批准**: 根据用户反馈调整计划，直到获得明确指令。

### 第三阶段：任务分解 (Breakdown to Tasks)
1.  **创建/更新任务清单**: 维护 `task.md`。
2.  **细化粒度**: 将大任务拆解为可独立执行的小步骤（如“实现 UI”、“编写逻辑”、“增加测试”）。
3.  **动态调整**: 开发中遇到新问题，及时回填到任务清单。

### 第四阶段：执行 (Execute)
1.  **任务边界**: 每次操作前调用 `task_boundary`，明确当前正在做什么。
2.  **渐进式编码**:
    *   小步快跑，频繁验证。
    *   代码风格统一，关键逻辑添加注释。
3.  **验证**:
    *   运行代码，检查日志和输出。
    *   创建 `walkthrough.md` 记录验证过程和结果截图。

### 第五阶段：交付与归档 (Delivery & Archive)
1.  **本地提交**: 确保代码变更已通过 `git commit` 保存到本地仓库。
2.  **远程推送**: **必须**主动询问用户是否将代码推送到 GitHub (`git push`)，以防止数据丢失。

## 3. 常见场景指南 (Common Scenarios)

### 新功能开发
*   先定义接口和数据结构，再实现细节。
*   优先打通核心流程（Happy Path），再处理边缘情况。

### Bug 修复
*   **重现**: 必须先能稳定复见 Bug。
*   **定位**: 使用二分法或日志定位根因。
*   **修复**: 针对根因修复，避免掩盖问题。
*   **验证**: 确认 Bug 消除且无回归。

### 重构
*   确保有测试覆盖或手动验证手段。
*   小步提交，保持代码处于可运行状态。

## 4. 输出规范 (Output Standards)

*   **语言要求**：所有回复、思考过程及任务清单, 均须使用 **中文**。
*   **格式**: Markdown 格式清晰，重点加粗。
*   **指令响应**: 随时准备响应 `'Implementation Plan,Task List and Thought in Chinese'` 指令。
