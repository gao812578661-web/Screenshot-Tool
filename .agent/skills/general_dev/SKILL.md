---
name: general_development
description: 遵循“用户核心开发协议”的轻量化通用开发工作流。包含分析、计划、执行与验证。
---

# 通用开发能力 (General Development)

本指南定义了在 RefScrn 项目中进行开发时必须遵循的标准流程和规范。

## 1. 核心流程 (Core Workflow)

### 第一阶段：调研与分析 (Research & Analysis)
*   **输入**: 用户需求或 Bug 报告。
*   **动作**: 
    1.  仔细阅读用户请求，确认最终目标。
    2.  利用搜索工具 (`grep_search`) 和知识库 (KIs)。
    3.  厘清现状，定位关键代码位置。
    4.  **必须**在开始前厘清所有疑点。

### 第二阶段：构思方案 (Draft Plan)
*   **工具**: 创建或更新 `implementation_plan.md`。
*   **内容**:
    1.  **目标说明**: 简述变更目的。
    2.  **拟议变更**: 列出受影响的文件和逻辑。
    3.  **验证计划**: 定义如何确认结果可控。

### 第三阶段：提请审核 (Request Review)
*   **工具**: `notify_user` 将计划呈现给用户。
*   **动作**: 等待用户批准或根据反馈调整计划。**严禁**在未经批准的情况下直接开始大规模编码。

### 第四阶段：分解与执行 (Breakdown & Execute)
1.  **分解任务**: 将大任务拆解为可独立执行的小步骤，同步更新 `task.md`。
2.  **任务边界**: 每次操作前调用 `task_boundary`，明确当前状态。
3.  **渐进式开发**:
    *   小步快跑，频繁验证。
    *   代码风格统一，关键逻辑添加注释。

### 第五阶段：验证与交付 (Verification & Delivery)
1.  **验证**: 运行代码，执行手动或自动测试。创建 `walkthrough.md` 记录验证过程。
2.  **本地提交**: 变更通过验证后执行 `git commit`。
3.  **文档同步**: 随着功能迭代，**必须**同步更新项目根目录下的 `README.md`，确保使用说明与代码行为一致。
4.  **远程推送**: **必须**主动询问用户是否将代码推送到 GitHub (`git push`)。

## 2. 输出规范 (Output Standards)

*   **语言**: 全程使用 **中文**。
*   **交互**: 保持简洁，聚焦决策点。随时准备响应 `'Implementation Plan,Task List and Thought in Chinese'` 指令。

## 3. 常见场景指南 (Common Scenarios)

### 新功能开发
*   先定义接口和数据结构，再实现细节。
*   优先打通核心流程（Happy Path），再处理边缘情况。

### Bug 修复
*   **重现**: 必须能稳定复见 Bug。
*   **定位**: 使用日志或断点定位根因，而非掩盖症状。
*   **验证**: 确认 Bug 消除且无回归。
